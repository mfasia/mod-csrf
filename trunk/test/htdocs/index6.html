<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html>
  <head>
    <title>index 6</title>

<script type="text/javascript">

var counter1 = 0;

function autoStart() {
  var d = new Date();
  var n = d.getTime();
  counter1 = n % 100000;
  setInterval("doPOST()", 2000);
}

function doPOST() {
  var url = "update5.txt";
  var params = "foo=bar";
  var update = document.getElementById("autoupdate");
  var http = new XMLHttpRequest();

  counter1++;

  http.open("POST", url, true);
  http.setRequestHeader("Content-type", "application/x-www-form-urlencoded");
  http.setRequestHeader("Content-length", params.length);
  http.setRequestHeader("Connection", "close");

  http.onreadystatechange = function() {
    if(http.readyState == 4 && http.status == 200) {
      update.innerHTML = "<b>" + counter1 + "</b><br>" + http.responseText;
    } else {
      update.innerHTML = "FAILED!!!";
    }
  }
  http.send(params);
}

autoStart();

</script>
  </head>

  <body>
    <h1>page 6</h1>

<div id="autoupdate">-</div>

<p>
    <a href="/index3.html">index 3</a>
</p>



    <hr>

  </body>
</html>
