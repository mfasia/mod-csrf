<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html>
  <head>
    <title>page 4</title>

<script type="text/javascript">

var counter1 = 0;

function autoStart() {
  setInterval("autoUpdate()", 1000);
}

function autoUpdate() {
  var update = document.getElementById("autoupdate");
  var link = "/update.txt" + "?" + "id=" + counter1;
  if(window.XMLHttpRequest) { // non-IE browsers
    req = new XMLHttpRequest();
    req.onreadystatechange = statusDiv;
    try {
      req.open("GET", link, true);
    } catch (e) {
      // ignore
      update.innerHTML = "FAILED!!!";
    }
    req.send(null);
  } else if (window.ActiveXObject) { // IE
    req = new ActiveXObject("Microsoft.XMLHTTP");
    if (req) {
      req.onreadystatechange = statusDiv;
      req.open("GET", link, true);
      req.send();

    }
  }
}

// callback
function statusDiv() {
  if (req.readyState == 4) { // Complete
    if (req.status == 200) { // OK response
      var update = document.getElementById("autoupdate");
      counter1++;
      update.innerHTML = req.responseText + " <b>" + counter1 + "</b>";
    } else{
      var update = document.getElementById("autoupdate");
      update.innerHTML = "FAILED!!!";
    }
  }
}

autoStart();
</script>

  </head>

  <body>
    <h1>page 4</h1>
<p>
    <a href="/index.html">home</a>
</p>
<div id="autoupdate">-</div>


    <hr>
  </body>
</html>
